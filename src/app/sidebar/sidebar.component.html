<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

<div class="relative bg-black-secondary text-white h-full">
  <div *ngIf="viewMode && totalCards === 0" class="p-6 flex flex-col justify-center items-center mx-auto my-auto h-full max-w-72">
    <img class="w-52 h-auto" src="../../assets/Poliwhirl.gif" alt="Poliwag image">
    <h3 class="text-white text-center text-2xl">Selecione um baralho para ver detalhes</h3>
  </div>
  <div *ngIf="viewMode && totalCards || editMode" class="p-4 flex flex-col justify-between gap-3 h-full">
    <input *ngIf="!isCurrentRouteMyDecks()" class="bg-black-secondary text-2xl outline-none " [(ngModel)]="deckName" (ngModelChange)="onDeckNameChange($event)" placeholder="Nome do baralho">
    <h4 *ngIf="isCurrentRouteMyDecks()" class="bg-black-secondary text-2xl outline-none ">{{ deckName }}</h4>
    <p>Cartas no baralho: {{ totalCards }}/60</p>
    <div class="flex flex-row align-middle gap-2">
      <img *ngFor="let type of selectedTypes" class="h-6" [src]="'../../assets/types/' + type + '.png'" alt="type" [title]="type">
    </div>
    <div>
      <h4 class="text-sm">Pok√©mon( {{numOfPokemonCards}} ), Treinador( {{numOfTrainerCards}} ), Energia( {{numOfEnergyCards}} )</h4>
      <hr>
    </div>

    <div class="flex-grow rounded-lg bg-gray-200 overflow-y-auto h-60 custom-scrollbar">
      <app-horizontal-card *ngFor="let card of selectedPokemonCards"
      [name]="card.name"
      [countInDeck]="card.countInDeck"
      [imageSmall]="card.imageSmall"
      [imageLarge]="card.imageLarge"
      [isCurrentRouteMyDecks]="!isCurrentRouteMyDecks()"
      (showCardDetail)="showCardDetail($event)"
      (hideCardDetail)="hideCardDetail()"
      (removeFromDeck)="removeFromDeck(card)"
      ></app-horizontal-card>

      <app-horizontal-card *ngFor="let card of selectedTrainerCards"
      [name]="card.name"
      [countInDeck]="card.countInDeck"
      [imageSmall]="card.imageSmall"
      [imageLarge]="card.imageLarge"
      [isCurrentRouteMyDecks]="!isCurrentRouteMyDecks()"
      (showCardDetail)="showCardDetail($event)"
      (hideCardDetail)="hideCardDetail()"
      (removeFromDeck)="removeFromDeck(card)"
      ></app-horizontal-card>

      <app-horizontal-card *ngFor="let card of selectedEnergyCards"
      [name]="card.name"
      [countInDeck]="card.countInDeck"
      [imageSmall]="card.imageSmall"
      [imageLarge]="card.imageLarge"
      [isCurrentRouteMyDecks]="!isCurrentRouteMyDecks()"
      (showCardDetail)="showCardDetail($event)"
      (hideCardDetail)="hideCardDetail()"
      (removeFromDeck)="removeFromDeck(card)"
      ></app-horizontal-card>
    </div>

    <div>
      <div *ngIf="editMode" class="flex flex-row align-middle gap-4">
        <button class="rounded bg-red border-red border-2 p-2 outline-none w-full" (click)="onCancel()">Cancelar</button>
        <button class="rounded bg-blue border-blue border-2 p-2 outline-none w-full" (click)="onSaveDeck()">Salvar</button>
      </div>

      <div *ngIf="viewMode" class="flex flex-row align-middle gap-4">
        <button class="rounded bg-red border-red border-2 p-2 outline-none w-full" (click)="onDeleteDeck()">Excluir</button>
        <button class="rounded bg-yellow border-yellow border-2 p-2 outline-none w-full" (click)="onEditDeck()">Atualizar</button>
      </div>
    </div>
  </div>

</div>
<div *ngIf="cardToShow" class="absolute inset-0 top-0 left-80 flex justify-center items-center">
  <div class="p-4 shadow-md">
    <img class="w-72 h-auto" [src]="cardToShow" alt="Imagem da carta">
  </div>
</div>
